 <head> 
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 </head>

{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'stocks/style.css' %}">

{% if latest_gainer_list %}
    <ul>
    {% for gainer in latest_gainer_list %}
        <li>{{ gainer }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No Gainers are available.</p>
{% endif %}

{% if results %}
    <ul>
    {% for stock in stock_list %}
        <li>{{ stock }}</a></li>
    {% endfor %}
    </ul>
{% else %}
{{stock_list}}
    <p>No Stock Symbols are Stored.</p>
{% endif %}


<div class = outer_table>
<table>
    <tr>
        <th>Stock</th>
        <th>Date</th>
        <th>Change Percentage</th>
        <th>Price</th>
    </tr>
        {% for row in gain_df.itertuples %}
        <tr>
            <td>
                {{row.stock}}
            </td>
            <td>
                {{row.date}}
            </td>
            <td>
                {{row.change_percentage}}
            </td>
            <td>
                {{row.price}}
            </td>
        </tr>
        {% endfor %}
</table>
</div>

<div>
    <p><em>Stock Gainers</em></p>
    {{ gainer_graph_div|safe }}
</div>

<div>
    <p><em>Stock Losers</em></p>
    {{ loss_graph_div|safe }}
</div>m 

<div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block w-100" src="..." alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="..." alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="..." alt="Third slide">
      </div>
    </div>
  </div>

<script>     
    var table_index=0;
    var num = 5;

      function show_table() {
          var i; 
          var table_data = document.getElementsByTagName("tr");
          
          for (i=1; i<table_data.length; i++) {
              table_data[i].style.display = "none";
          }
          
          if (table_index > table_data.length -1) {table_index=1}
            for (j=0; j<num; j++) {
              x = j+1+table_index;
              if (x > table_data.length-1) {x=x-11;}
              table_data[x].style.display = "table-row";
             }
            table_index++;
         
          setTimeout(show_table, 7000);
      }
     
      show_table();

</script>